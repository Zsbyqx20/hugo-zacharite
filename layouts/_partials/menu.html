{{- $page := .page -}}
{{- $menuID := .menuID -}}
{{- $currentPath := strings.TrimSuffix "/" $page.RelPermalink -}}
{{- with index site.Menus $menuID }}
<nav class="main-nav" aria-label="Primary">
  {{- range . }}
    {{- $targetURL := .URL | relURL -}}
    {{- $targetPath := strings.TrimSuffix "/" $targetURL -}}
    {{- $isCurrent := or ($page.IsMenuCurrent .Menu .) ($page.HasMenuCurrent .Menu .) (and (eq $targetPath "") (eq $currentPath "")) (eq $targetPath $currentPath) -}}
    <a href="{{ $targetURL }}" {{ if $isCurrent }}aria-current="page"{{ end }}>{{ .Name }}</a>
  {{- end }}
</nav>
{{- end }}
