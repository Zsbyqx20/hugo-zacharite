{{ define "main" }}
  <section class="search-page">
    <h1 class="page-title">{{ .Title }}</h1>
    {{ with .Content }}<div class="prose page-prose">{{ . }}</div>{{ end }}

    {{- $searchParams := site.Params.search | default dict -}}
    {{- $searchEnabled := ne (default true (index $searchParams "enabled")) false -}}
    {{- $indexPath := default "/search-index.json" (index $searchParams "indexPath") -}}
    {{- $debounceMs := default 80 (index $searchParams "debounceMs") -}}
    {{- $minQueryLength := default 1 (index $searchParams "minQueryLength") -}}
    {{- $maxResults := default 50 (index $searchParams "maxResults") -}}

    <div
      class="search-panel"
      data-search-enabled="{{ if $searchEnabled }}true{{ else }}false{{ end }}"
      data-search-index-path="{{ $indexPath }}"
      data-search-debounce-ms="{{ $debounceMs }}"
      data-search-min-query-length="{{ $minQueryLength }}"
      data-search-max-results="{{ $maxResults }}"
    >
      <label for="search-input" class="search-label">Search posts</label>
      <input id="search-input" class="search-input" type="search" placeholder="Type keywords..." autocomplete="off" data-search-input>

      <p class="muted" data-search-count>Type to search posts.</p>
      <p class="muted" hidden data-search-empty>No posts match your search.</p>
      <p class="muted" hidden data-search-loading>Loading search indexâ€¦</p>
      <p class="muted" hidden data-search-error>Search is temporarily unavailable.</p>

      <ul class="search-results" data-search-results></ul>
    </div>
  </section>
{{ end }}
